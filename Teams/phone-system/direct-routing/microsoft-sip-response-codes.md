---
title: Microsoft and SIP response codes
description: Combination of Microsoft and SIP response codes can help identify the root cause of errors. Provide detailed description of errors and actions that you can take.
ms.date: 8/19/2022
author: helenclu
ms.author: luche
manager: dcscontentpm
audience: Admin
ms.topic: troubleshooting
localization_priority: Normal
search.appverid: 
  - SPO160
  - MET150
appliesto: 
  - Microsoft Teams
ms.custom: CI166247,CSSTroubleshoot
ms.reviewer: rishire
---

# Microsoft and SIP response codes

When you troubleshoot Direct Routing issues, the specific cause of a call failure can be identified through a combination of the following response codes:

- SIP response code (CallEndReason): A three-digit response code that shows the request status. It's received from the Session Border Controller (SBC) or Direct Routing SIP interface. This code tells what happened, for example, the SBC didn't reply in a timely manner. The SIP response codes are defined in [RFC 3261](https://www.rfc-editor.org/rfc/rfc3261#page-182).
- Microsoft response code (CallEndSubReason): A response code that's assigned by Microsoft. It's usually a six-digit code, but may be reported as 0 or more than six digits depending on the problem. This code tells why the problem occurred, for example, the certificate on the SBC has expired.

These response codes are reported in the Microsoft Teams admin center, and the Power BI Quality of Experience (QER) reports for PSTN.

## Microsoft response code

The structure of a Microsoft response code is as follows:

*5\<X\>\<Y\>\<ZZZ\>*

- 5 stands for the PSTN hub.
- \<X\> denotes the module that generates the response code. If \<X\> is 6, it indicates that the SBC generated the final response code. All other values of \<X\> indicate that a Microsoft module generated the final response code.  
- \<Y\> is the module-specific source/protocol.
- \<ZZZ\> is the module/source-specific code, it may be equivalent to the SIP response code.

Any Microsoft response code starting with *560* is generated by the SBC.  All other response codes are generated by Microsoft. For example, if the Microsoft response code is *560403*, it indicates that the final response code is generated by the SBC, and the last three digits represent the SIP response code (403).

## Direct Routing error codes

This section lists combinations of Microsoft and SIP response codes, the corresponding error messages and detailed description, and actions you can take.

### 500001 408 Gateway (SBC) failover timer expired

- Microsoft response code: **500001**
- SIP response code: **408**
- Error message: **Gateway (SBC) failover timer expired**
- Description:  
  Request timeout. The response can't be produced within an acceptable amount of time. Failover timer expired on outbound call.

  When a Teams user makes an outbound call, the Direct Routing interface sends a SIP INVITE message to the SBC. If the SBC doesn't reply within the timeout value configured in Teams, the call will be dropped. This response code is generated by the Microsoft Teams service.
- Suggested actions:  
  Investigate why the SBC didn't send a response to the invitation within the configured timeout value defined by [FailoverTimeSeconds](/powershell/module/skype/set-csonlinepstngateway?view=skype-ps&preserve-view=true). The default value is 10 seconds.

  This error usually occurs in regions with long PSTN setup times. Consider changing the failover timer to 20 seconds in these regions or all Direct Routing trunks.

### 560403 403 Forbidden; Call rejected

- Microsoft response code: **560403**
- SIP response code: **403**
- Error message: **Forbidden; Call rejected**
- Description:  
  When a Teams user makes an outbound call, the Direct Routing interface sends a SIP INVITE message to the SBC. The SBC responds with a 403 SIP response.
- Suggested actions:  
  Check the logs on the SBC to investigate why the call was rejected.

### 510559 403 Get Outbound routing - No viable path (Forbidden)

- Microsoft response code: **510559**
- SIP response code: **403**
- Error message: **Get Outbound routing - No viable path (Forbidden)**
- Description:  
  When a Teams user makes an outbound call, the Teams PSTN selector module checks for valid voice routes for the called number. This error is generated if there's no match.  And downstream customer SBC never receives a SIP INVITE.
- Suggested actions:  
  Make sure the dialed number in Teams matches a corresponding number pattern in a voice route for the given user. In some cases, this error occurs due to the incorrect number being dialed, or the customer's own internal policy that prevents calls to specific countries/number patterns.

### 560503 503 Service unavailable. SBC undergoing maintenance or temporarily overloaded

- Microsoft response code: **560503**
- SIP response code: **503**
- Error message: **Service unavailable. SBC undergoing maintenance or temporarily overloaded.**
- Description:  
  For an outbound call, the SBC returns a 503 SIP response for different reasons, including but not limited to:

  - The number of concurrent sessions has temporarily exceeded the licensing or capacity threshold on the SBC.
  - No circuit/channel is available to handle the call.  
- Suggested actions:  

  - Check the logs on the SBC to investigate why it returns the 503 SIP response.
  - Make sure the SBC is properly licensed to handle the number of concurrent sessions.
  - Determine if the 503 error is related to a specific destination country or calling corridor.

### 560484 484 Invalid number format. SBC rejected the call

- Microsoft response code: **560484**
- SIP response code: **484**
- Error message: **Invalid number format. SBC rejected the call.**
- Description:  
  The SBC returns a 484 SIP response to the Teams service, because the called number in the **TO** header is invalid.
- Suggested actions:  
  Review the tenant's call records with *CallEndSubReason = 560484*. Look for trends in the called numbers, including called numbers distribution by country. Patterns can be identified that would suggest additional normalization rules for extension-based dialing, or follow up on user education.  

  In some cases, these failures can be ignored because the end user is dialing an invalid number. In another case, the SBC could cause these failures due to missing configuration in a call transfer scenario (CallType = ByotOutUserForwarding).

### 560408 408 SBC indicated that the user did not respond (Request timeout)

- Microsoft response code: **560408**
- SIP response code: **408**
- Error message: **SBC indicated that the user did not respond (Request timeout)**
- Description:  
  When a Teams user makes an outbound call, the Direct Routing interface sends a SIP INVITE message to the SBC. The SBC routes the message accordingly and starts a timer. If no response to the INVITE is received, the SBC will generate a 408 SIP response back to the Teams service. This error may be related to the dialed number or a downstream component.
- Suggested actions:  
  Review the tenant's call records with *CallEndSubReason = 560408*. Look for trends in the called numbers, or a distribution of the failures by destination country. Patterns can be identified that would suggest a problem with a downstream component.

### 0 408 Establishment timeout

- Microsoft response code: **0**
- SIP response code: **408**
- Error message: **Establishment timeout**
- Description:  
  ConversationEndReasonNoModalityConnected. Media wasn't established within 90 seconds. It indicates a client error.
- Suggested actions:  
  Check network connection between the client and the Teams service.

### 569009 504 Unable to deliver INVITE: outgoing TLS negotiation failed; HRESULT=0x80090325 SEC_E_UNTRUSTED_ROOT

- Microsoft response code: **569009**
- SIP response code: **504**
- Error message: **Unable to deliver INVITE: outgoing TLS negotiation failed; HRESULT=0x80090325 SEC_E_UNTRUSTED_ROOT**
- Description:  
  A 504 SIP response indicates that the Microsoft Teams Direct Routing interface tried to connect to your SBC, but the SBC didn't respond in time. This error may occur if the certificate presented by the SBC isn't signed by a trusted root certification authority.
- Suggested actions:  
  Request a certificate that's signed by one of the public root certification authorities listed in [Public trusted certificate for the SBC](/microsoftteams/direct-routing-plan#public-trusted-certificate-for-the-sbc).

  If you have multiple TLS profiles, check that you're using a profile with the correct certificate when connecting to the Direct Routing interface. If you have multiple TLS profiles on the SBC, make sure to select a profile that's signed with a certificate trusted by Direct Routing.
