---
title: Microsoft and SIP response codes
description: A combination of Microsoft and SIP response codes can help identify the cause of call failures and provide detailed descriptions of errors and actions that you can take.
ms.date: 8/19/2022
author: helenclu
ms.author: luche
manager: dcscontentpm
audience: Admin
ms.topic: troubleshooting
localization_priority: Normal
search.appverid: 
  - SPO160
  - MET150
appliesto: 
  - Microsoft Teams
ms.custom: CI166247,CSSTroubleshoot
ms.reviewer: rishire
---

# Microsoft and SIP response codes

When you troubleshoot Direct Routing issues, the specific cause of a call failure can be identified through a combination of the following response codes:

- SIP response code (CallEndReason): A three-digit response code that shows the request status. This code is received from the Session Border Controller (SBC) or Direct Routing SIP interface. It explains what occurred. For example, the SBC didn't reply in a timely manner. The SIP response codes are defined in [RFC 3261](https://www.rfc-editor.org/rfc/rfc3261#page-182).
- Microsoft response code (CallEndSubReason): A response code that's assigned by Microsoft. This code is usually six digits long, but it might be reported as 0 digits or more than six digits, depending on the problem. It explains why the problem occurred. For example, the certificate on the SBC expired.

These response codes are reported in the [Microsoft Teams admin center](/microsoftteams/direct-routing-health-dashboard#detailed-information-for-each-sbc) and the [Power BI Quality of Experience Report (QER) for PSTN](/microsoftteams/cqd-power-bi-query-templates).

## Microsoft response code

The structure of a Microsoft response code is as follows:

*5\<X\>\<Y\>\<ZZZ\>*

- *5* indicates the PSTN hub.
- \<*X*\> represents the module that generates the response code. If \<*X*\> is **6**, this indicates that the SBC generated the final response code. All other values of \<*X*\> indicate that a Microsoft module generated the final response code.  
- \<*Y*\> is the module-specific source or protocol.
- \<*ZZZ*\> is the module-specific or source-specific code. It might be equivalent to the SIP response code.

Any Microsoft response code that starts at *560* is generated by the SBC.  All other response codes are generated by Microsoft. For example, if the Microsoft response code is *560403*, this indicates that the final response code is generated by the SBC, and the last three digits represent the SIP response code (403).

## Direct Routing error codes

This section lists combinations of Microsoft and SIP response codes, the corresponding error messages, a detailed description, and actions that you can take.

### 500001 408 Gateway (SBC) failover timer expired

- Microsoft response code: **500001**
- SIP response code: **408**
- Error message: **Gateway (SBC) failover timer expired**
- Description:  
  Request time-out. The response can't be produced within an acceptable amount of time. Failover timer expired on outbound call.

  When a Teams user makes an outbound call, the Direct Routing interface sends an SIP INVITE message to the SBC. If the SBC doesn't reply within the time-out value that's configured in Teams, the call is dropped. This response code is generated by the Microsoft Teams service.
- Suggested actions:  
  Investigate why the SBC didn't send a response to the invitation within the configured time-out value as defined by [FailoverTimeSeconds](/powershell/module/skype/set-csonlinepstngateway?view=skype-ps&preserve-view=true). The default value is 10 seconds.

  This error usually occurs in regions that have long PSTN setup times. Consider changing the failover timer to 20 seconds in these regions or on all Direct Routing trunks.

### 560403 403 Forbidden; Call rejected

- Microsoft response code: **560403**
- SIP response code: **403**
- Error message: **Forbidden; Call rejected**
- Description:  
  When a Teams user makes an outbound call, the Direct Routing interface sends an SIP INVITE message to the SBC. The SBC responds by sending a "403" SIP response.
- Suggested actions:  
  Check the logs on the SBC to investigate why the call was rejected.

### 510559 403 Get Outbound routing - No viable path (Forbidden)

- Microsoft response code: **510559**
- SIP response code: **403**
- Error message: **Get Outbound routing - No viable path (Forbidden)**
- Description:  
  When a Teams user makes an outbound call, the Teams PSTN selector module checks for valid voice routes for the called number. This error is generated if there's no match. And the downstream customer SBC never receives an SIP INVITE.
- Suggested actions:  
  Make sure that the dialed number in Teams matches a corresponding number pattern in a voice route for the given user. In some cases, this error occurs because an incorrect number is dialed, or the customer's own internal policy prevents calls to specific countries or number patterns.

### 560503 503 Service unavailable. SBC undergoing maintenance or temporarily overloaded

- Microsoft response code: **560503**
- SIP response code: **503**
- Error message: **Service unavailable. SBC undergoing maintenance or temporarily overloaded.**
- Description:  
  For an outbound call, the SBC returns a "503" SIP response for different reasons, including but not limited to:
  - The number of concurrent sessions has temporarily exceeded the licensing or capacity threshold on the SBC.
  - No circuit or channel is available to handle the call.  
- Suggested actions:  
  - Check the logs on the SBC to investigate why it returns the "503" SIP response.
  - Make sure that the SBC is correctly licensed to handle the number of concurrent sessions.
  - Determine whether the "503" error is related to a specific destination country or calling corridor.

### 560484 484 Invalid number format. SBC rejected the call

- Microsoft response code: **560484**
- SIP response code: **484**
- Error message: **Invalid number format. SBC rejected the call.**
- Description:  
  The SBC returns a "484" SIP response to the Teams service because the called number that's in the **TO** header is invalid.
- Suggested actions:  
  Review the tenant's call records that contain *CallEndSubReason = 560484*. Look for trends in the called numbers, including the called numbers distribution by country. You can identify patterns that suggest that you should either establish additional normalization rules for extension-based dialing or follow up about user education.  

  In some cases, these failures can be ignored because the user is dialing an invalid number. In other cases, the SBC could cause these failures because of a missing configuration in a call transfer scenario (CallType = ByotOutUserForwarding).

### 560408 408 SBC indicated that the user did not respond (request timeout)

- Microsoft response code: **560408**
- SIP response code: **408**
- Error message: **SBC indicated that the user did not respond (request timeout)**
- Description:  
  When a Teams user makes an outbound call, the Direct Routing interface sends a SIP INVITE message to the SBC. The SBC routes the message accordingly and starts a timer. If no response to the INVITE is received, the SBC returns a "408" SIP response to the Teams service. This error might be related to the dialed number or a downstream component.
- Suggested actions:  
  Review the tenant's call records with *CallEndSubReason = 560408*. Look for trends in the called numbers, or a distribution of the failures by destination country. Patterns can be identified that would suggest a problem that affects a downstream component.

### 0 408 Establishment timeout

- Microsoft response code: **0**
- SIP response code: **408**
- Error message: **Establishment timeout**
- Description:  
  ConversationEndReasonNoModalityConnected. Media wasn't established within 90 seconds. It indicates a client error.
- Suggested actions:  
  Check the network connection between the client and the Teams service.

### 569009 504 Unable to deliver INVITE: outgoing TLS negotiation failed; HRESULT=0x80090325 SEC_E_UNTRUSTED_ROOT

- Microsoft response code: **569009**
- SIP response code: **504**
- Error message: **Unable to deliver INVITE: outgoing TLS negotiation failed; HRESULT=0x80090325 SEC_E_UNTRUSTED_ROOT**
- Description:  
  A "504" SIP response indicates that the Microsoft Teams Direct Routing interface tried to connect to your SBC, but the SBC didn't respond in time. This error might occur if the certificate that's presented by the SBC isn't signed by a trusted root certification authority.
- Suggested actions:  
  Request a certificate that's signed by one of the public root certification authorities that are listed in [Public trusted certificate for the SBC](/microsoftteams/direct-routing-plan#public-trusted-certificate-for-the-sbc).

  If you have multiple TLS profiles, check that you're using a profile that has the correct certificate when you connect to the Direct Routing interface. If you have multiple TLS profiles on the SBC, make sure that you select a profile that's signed by using a certificate that's trusted by Direct Routing.
