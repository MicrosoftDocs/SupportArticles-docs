---
title: Can't connect to Azure Kubernetes Fleet Manager hub cluster
description: This article provides guidance for actions to take when you can't connect to an Azure Kubernetes Fleet Manager hub cluster.
ms.date: 01/29/2026
ms.author: jarrettr
ms.reviewer: chiragpa, v-ryanberg 
ms.service: azure-kubernetes-fleet-manager
ms.custom: sap:Other issue or questions related to Fleet manager
---

# Unable to connect to Azure Kubernetes Fleet Manager hub cluster

This article helps you resolve an issue that prevents you from connecting to an Azure Kubernetes Fleet Manager hub cluster using `kubectl`.

## Symptoms

You try to connect to an Azure Kubernetes Fleet Manager's hub cluster by using credentials that were obtained by running the following command: 

```azurecli-interactive
az fleet get-credentials \
    --resource-group rg-contoso-01 \
    --name flt-contoso-01
```

When you try to call any API on the Fleet Manager hub cluster by using `kubectl`, you're prompted to enter a device code to authenticate.

If your organization enforces Conditional Access policies that block device code flows, you might receive a message that resembles the following message:

> Your sign-in was successful but does not meet the criteria to access this resource. For example, you might be signing in from a browser, app, location, or an authentication flow that is restricted by your admin.

The following screenshot shows an example of this kind of message.

:::image type="content" source="../media/unable-connect-azure-fleet-manager/no-access-message.png" alt-text="Example of Conditional Access blocking device code flow." lightbox="../media/unable-connect-azure-fleet-manager/no-access-message.png":::

## Cause

The kubeconfig file that's generated by the `az fleet get-credentials` command defaults to device code authentication. Conditional Access policies can block this flow and prevent access to the Fleet Manager hub cluster.

## Resolution

To resolve this issue, run the following command to modify kubeconfig to use Azure CLI authentication instead of device code authentication:

```bash
kubelogin convert-kubeconfig -l azurecli
```

If you use `kubectl` after you make this change, your existing Azure sign-in session is used or a non-device flow is initiated if you aren't already authenticated.
