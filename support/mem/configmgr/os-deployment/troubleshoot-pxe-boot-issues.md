---
title: Troubleshoot PXE boot issues
description: Helps administrators diagnose and resolve PXE boot failures in Configuration Manager.
ms.date: 12/05/2023
ms.custom: sap:Operating Systems Deployment (OSD)\PXE
ms.reviewer: kaushika
---
# Troubleshooting PXE boot issues in Configuration Manager

This article helps administrators diagnose and resolve PXE boot failures in Configuration Manager.

> [!IMPORTANT]
> For home users: This article is only intended for technical support agents and IT professionals. If you're looking for help with a problem, please ask the [Microsoft Community](https://answers.microsoft.com/).

_Original product version:_ &nbsp; Configuration Manager (current branch), Microsoft System Center 2012 Configuration Manager, Microsoft System Center 2012 R2 Configuration Manager  
_Original KB number:_ &nbsp; 4468612

## Introduction

For essential information about how PXE works, see the companion article [Understand PXE boot in ConfigMgr](understand-pxe-boot.md).

Before you start to troubleshoot on the PXE Service Point, we recommend that you try the following solutions. If solution 1 works for you, you don't need to go to solution 2. These solutions resolve most problems that affect PXE boot.

## Solution 1: Verify IP Helpers

IP Helpers aren't required if all of the following components are on the same subnet or VLAN:

- The DHCP server
- The client computer
- The ConfigMgr server that's running Windows Deployment Services (WDS)
- The PXE-enabled Distribution Point (DP)

IP Helpers must be configured on the routers if any of the components listed above are on separate subnets or VLANs. It's usually the case in most environments.

This process varies and depends on the router hardware manufacturer. For a general overview of the process, see [Configuring Your Router to Forward Broadcasts](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc732351(v=ws.10)#configuring-your-router-to-forward-broadcasts-recommended). For more information about how to correctly configure IP Helpers on your routers, contact the manufacturer of the router.

IP Helpers are necessary because the PXE request generated by the client computer is a broadcast that doesn't travel outside the local subnet or VLAN. If the DHCP server or the WDS/PXE-enabled DP isn't on the same subnet or VLAN as the client computer, they won't see or hear the PXE request broadcast from the client. Therefore, the servers won't respond to the PXE request. To have the PXE request broadcast travel between subnets or VLANs, the PXE request broadcast must be forwarded by the router to DHCP and WDS/PXE Service Point servers so that they can correctly respond to the client's PXE request.

### Using DHCP options isn't recommended

DHCP options can be problematic and might not work reliably or consistently. Also, using DHCP options to control PXE requests in Configuration Manager **is not supported by Microsoft**.

The recommended and supported method for PXE booting client computers on remote subnets is to use IP Helpers.

For more information about DHCP options that aren't recommended or supported, see the following articles:

- [You want to PXE Boot? Don't use DHCP Options](https://techcommunity.microsoft.com/t5/Configuration-Manager-Blog/You-want-to-PXE-Boot-Don-t-use-DHCP-Options/ba-p/275562)
- [Configure at least one distribution point to accept PXE requests](/configmgr/osd/deploy-use/use-pxe-to-deploy-windows-over-the-network#BKMK_Configure)

### Verify that DHCP options 60, 66, and 67 aren't configured

> [!IMPORTANT]
> Before you continue, it's imperative that you verify both the following conditions:
>
> - The routers have IP Helpers configured.
> - The DHCP server does **not** have DHCP Options 60, 66, or 67 configured.

If both these criteria aren't met, the PXE Service Point will experience problems. When you check DHCP options, make sure that you check the options at both the server and scope levels.

In certain instances, configuring DHCP options 60, 66, and 67 may make the PXE boot process appear to proceed further along than it did before these options were configured. However, in most cases, the process is actually proceeding along an incorrect path.

> [!IMPORTANT]
> The only exception in which a DHCP option must be used is if DHCP and WDS reside on the same server. In this situation, only DHCP Option 60 has to be set. DHCP Options 66 and 67 should still **not** be set in this scenario. For more information, see [Advanced troubleshooting for PXE boot issues in Configuration Manager](advanced-troubleshooting-pxe-boot.md).

## Solution 2: Reinstall PXE (use only if Solution 1 didn't resolve the issue)

In many cases, errors that occur during installation or configuration are the cause of PXE boot issues. They can be difficult and time-consuming to pinpoint. In many cases, reinstalling PXE and starting over can be the most effective and least time-consuming solution. To do it, follow these steps:

1. On the DP, clear the **Enable PXE** checkbox. When you're prompted to remove the Windows Deployment service, select **Yes**.
2. Verify that PXE was uninstalled. Use Distmgr.log for DPs on site servers. Use Smsdpprov.log for a standalone DP.

   > [!IMPORTANT]
   > Do not proceed until you verify that PXE is fully uninstalled.

3. In Server Manager, verify that WDS is uninstalled. If WDS is uninstalled, there should be a pending restart.
4. Restart the server.
5. Locate and delete the RemoteInstall folder.
6. Change the date on the self-signed certificate in the properties of PXE DP. Wait for the new certificate to be created. It isn't applicable if the DP is HTTPS.
7. Add the PXE point again by selecting the check box in DP properties. Monitor through Distrmgr.log if the DP is on the site server. Or monitor through Smsdpprov.log for a standalone DP. Verify that the DP was installed.
8. Verify that a new RemoteInstall folder was created.
9. Verify that at least one x64 boot image and one x86 boot image is distributed to the DP. For each boot image that's distributed to the PXE DP and that will be used for PXE boot, make sure that the PXE option is enabled for each boot image. BIOS PCs or UEFI PCs in Legacy mode require an x86 boot image even if all PCs in the environment are x64.
10. Verify that the WDS service was started.
11. Navigate to the RemoteInstall folder, and verify the following SMS folders were created:
    - SMSBoot
    - SMSImages
    - SMSTemp
    - SMSTEmpBootFiles
12. Navigate to the SMSImages folder, and verify that all the boot images that were distributed to the PXE DP are listed here. Boot images are listed by Package ID.
13. Navigate to the SMSBoot folder, and verify that both the x86 and x64 folders are populated with files.
14. Try a PXE boot.

## Need more help

For more help with troubleshooting PXE boot issues, see [Advanced troubleshooting for PXE boot issues in Configuration Manager](advanced-troubleshooting-pxe-boot.md).

For more help to resolve this issue, see our [TechNet support forum](https://social.technet.microsoft.com/Forums/home?forum=configmanagerosd&filter=alltypes&sort=lastpostdesc) or [contact Microsoft Support](https://support.microsoft.com/).

[!INCLUDE [Third-party information disclaimer](../../../includes/third-party-disclaimer.md)]

[!INCLUDE [Third-party contact disclaimer](../../../includes/third-party-contact-disclaimer.md)]
